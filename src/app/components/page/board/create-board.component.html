<navbar></navbar>

<main class="p-0 m-0 d-flex gap-0" id="main">
    <sidebar></sidebar>

    <div id="main-area" class="m-0 p-3 board-icon" [class.sidebar-hide]="!toggleStore.isShow">
        <section class="container-fluid d-flex justify-content-center align-items-center mt-5 w-100">
            <div class="container p-5 d-flex justify-content-center align-item w-auto rounded-1 text-black create-board bg-white py-5 h-auto shadow-sm" style="width:650px !important;max-width:650px;">
                <form (ngSubmit)="createBoard()" class="w-100" novalidate>
                    <div class="row d-flex justify-content-center align-items-center">
                        <h1 class="text-center mb-3 opacity-75">Create Board</h1>
                        <div class="col-8">
                            <div class="form-floating mb-3">              
                                
                                <input  type="text" class="form-control" name=boardName id="floatingInput" placeholder="UserName" [(ngModel)]="board.boardName" [class.is-invalid]="status.error.boardName.hasError" required/>
                                <label for="floatingInput" class="text-black-50">Board Name</label>
                                <small *ngIf="status.error.boardName.hasError" class="text-danger">{{ status.error.boardName.msg }}</small>
                            </div>
                            <div class="col-12 ">
                                <div class="form-floating mb-3">
                                    
                                    <textarea class="form-control" name="description" id="floatingTextarea2" placeholder="Description" style="height: 100px" [(ngModel)]="board.description"  required ></textarea>
                                    <label for="floatingTextarea2" class="text-black-50">Description</label>
                                    <!-- <small *ngIf="status.error.description.hasError" class="text-danger">{{ status.error.description.msg }}</small> -->
                        
                                </div>
                            </div>
                            <div class="col-12 emailbox" [style]="emails.length > 3 ? 'height:100px !important;' : 'height:auto;'">
                                <label for="invite" class="form-label text-black-50">Invite Members</label>
                                <div  class="d-flex gap-1 flex-wrap ">
                                    <span *ngFor="let email of emails;let idx =index" (click)="setUpdateEmail(idx)"  class="badge d-inline-block fs-6 fw-light py-2 my-2" id="mail-capsule">
                                         {{email}}
                                         <span (click)="removeEmail(idx)" class="mx-1 fs-6 fas fa-close"></span>
                                    </span>
                                </div>

                            </div>

                            <div class="w-100 form-floating">
                                    <input 
                                     name="emailStr" 
                                    [(ngModel)]="emailStr" (keyup)="onChange($event)" 
                                    [value]="emailStr" [class.is-invalid]="status.error.email.hasError" 
                                    id="invitedEmail" 
                                    [matAutocomplete]="emailAutoComplete"
                                    class="form-control"
                                    placeholder="member@gmail.com" 
                                    />
                                    <label for="invitedEmail" class="text-black-50">member@gmail.com</label>
                                    <mat-autocomplete #emailAutoComplete="matAutocomplete" >
                                        <mat-option *ngFor="let email of filterEmails" [value]="email">
                                            {{ email }}
                                        </mat-option>
                                    </mat-autocomplete>
                            </div>
                            <small class="text-danger">{{ status.error.email.msg }}</small>
                            <div class="mb-3 mt-3 float-end">
                                <button class="btn me-4">Cancel</button>
                                <button class="btn btn-primary" [disabled]="status.isLoading">{{ status.isLoading ? 'Creating Board' : 'Create Board'}}</button>
                            </div>

                        </div>
                    </div>
                </form>
            </div>
        </section>
    </div>
</main>
