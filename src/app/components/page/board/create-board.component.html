<navbar></navbar>

<main class="p-0 m-0 d-flex gap-0" id="main">
    <sidebar></sidebar>

    <div id="main-area" class="m-0 p-3 board-icon" [class.sidebar-hide]="!toggleStore.isShow">
        <section class="container-fluid d-flex justify-content-center align-items-center mt-5">
            <div class="container w-auto rounded-5 text-white create-board  bg-black  py-5 h-auto">
                <form (ngSubmit)="createBoard()" novalidate>
                    <div class="row d-flex justify-content-center align-items-center">
                        <h1 class="text-center">Create Board</h1>
                        <div class="col-6">
                            <div class="mb-3">
                                <mat-form-field class="w-100">
                                    <mat-label class="text-white">Enter board name</mat-label>
                                <!-- <label for="exampleInputEmail1" class="form-label">Board Name</label> -->
                                <input matInput type="text" name=boardName  [(ngModel)]="board.boardName" [class.is-invalid]="status.error.boardName.hasError" required/>
                                <small *ngIf="status.error.boardName.hasError" class="text-danger">{{ status.error.boardName.msg }}</small>
                            </mat-form-field>
                            </div>
                            <div class="col-12 ">
                                <div class="mb-3">
                                    <mat-form-field class="w-100">
                                        <mat-label class="text-white">Write something about your board...</mat-label>
                                    <!-- <label for="exampleFormControlTextarea1" class="form-label">Description</label> -->
                                    <textarea matInput   rows="3" [(ngModel)]="board.description" name="description" [class.is-invalid]="status.error.description.hasError" required ></textarea>
                                    <small *ngIf="status.error.description.hasError" class="text-danger">{{ status.error.description.msg }}</small>
                                </mat-form-field>
                                </div>
                            </div>
                            <div class="col-12 emailbox" [style]="emails.length > 3 ? 'height:100px !important;' : 'height:auto;'">
                                <label for="invite" class="form-label">Invite Members</label>
                                <div  class="d-flex gap-1 flex-wrap ">
                                    <span *ngFor="let email of emails;let idx =index" (click)="setUpdateEmail(idx)"  class="badge d-inline-block fs-6 fw-light py-2 my-2" id="mail-capsule">
                                         {{email}}
                                         <span (click)="removeEmail(idx)" class="mx-1 fs-6 fas fa-close"></span>
                                    </span>
                                </div>

                            </div>

                            <mat-form-field class="w-100">
                                    <input 
                                     name="emailStr" 
                                    [(ngModel)]="emailStr" (keyup)="onChange($event)" 
                                    [value]="emailStr" [class.is-invalid]="status.error.email.hasError" 
                                    id="invite" placeholder="member@gmail.com" 
                                    [matAutocomplete]="emailAutoComplete"
                                    matInput
                                    />
                                    <mat-autocomplete #emailAutoComplete="matAutocomplete" >
                                        <mat-option *ngFor="let email of filterEmails" [value]="email">
                                            {{ email }}
                                        </mat-option>
                                    </mat-autocomplete>
                            </mat-form-field>
                            <small class="text-danger">{{ status.error.email.msg }}</small>
                            <div class="mb-3 mt-3 float-end">
                                <button class="btn me-4">Cancel</button>
                                <button class="btn btn-primary">{{ status.isLoading ? 'Creating Board' : 'Create Board'}}</button>
                            </div>

                        </div>
                    </div>
                </form>
            </div>
        </section>
    </div>
</main>
